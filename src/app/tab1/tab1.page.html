<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      Blases Loaded
    </ion-title>
    <ion-buttons slot="secondary">
      <ion-button *ngIf="loading">
        <ion-spinner></ion-spinner>
      </ion-button>
      <ion-button *ngIf="errors &gt; 0">
        <ion-icon name="bug-outline" color="danger"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar>
    <ion-segment (ionChange)="segmentChanged($event)" [value]="segment">
      <ion-segment-button value="all">
        <ion-label>All</ion-label>
      </ion-segment-button>
      <ion-segment-button value="active">
        <ion-label>Active</ion-label>
      </ion-segment-button>
      <ion-segment-button value="favorites">
        <ion-label>Favorites</ion-label>
      </ion-segment-button>
    </ion-segment>
    <ion-buttons slot="secondary">
      <ion-button (click)="toggleSearchbar()">
        <ion-icon name="search-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-searchbar *ngIf="filterVisible" debounce="200" value="{{searchTerm}}" showCancelButton="focus" (ionInput)="filterList($event)"></ion-searchbar>
  <ion-item lines="none">
    <h4 *ngIf="data && data.games" class="ion-no-margin">Season {{data.games.season.seasonNumber + 1}}, Day {{data.games.sim.day + 1}}</h4>
  </ion-item>
  <ion-content *ngIf="errors &gt; 0" color="danger">
    <ion-grid class="danger">
      <ion-row>
        <ion-col class="big">
          API Error{{'!'.repeat(errors)}}
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          Last successful update: {{lastUpdate}}
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="6" size-xl="6" *ngFor="let game of games; trackBy: gameId">
        <app-diamond [game]="game" (refresh)="refresh()"></app-diamond>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
